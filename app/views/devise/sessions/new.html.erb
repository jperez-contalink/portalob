<style>
  body {
      background-image: url("portal_extranet_rase.jpg");
      background-repeat: no-repeat;
      background-size: 100%;
  }
</style>
<body>
  <br><br><br><br><br><br><br>

  <%= form_for(resource, as: resource_name, url: session_path(resource_name)) do |f| %>
  <div align="center">
    <div align="left" style="background-color:#E6E6E6;padding:1% 4% 1% 4%;border-radius:10px;width:45%;">
      <br><div align="center"><h3>Iniciar Sesión</h3></div>
      <% flash.each do |name, msg| %>
      <%= content_tag(:div, msg, class: "alert alert-info") %>
      <% end %>
      <div class="form-group">
        <%= f.label :email %><br />
        <%= f.email_field :email, autofocus: true, class: "form-control" %>
      </div>

      <div class="form-group">
        <%= f.label :password %><br />
        <%= f.password_field :password, autocomplete: "off", class: "form-control" %>
      </div>

      <% if devise_mapping.rememberable? -%>
        <div class="form-group">
          <%= f.check_box :remember_me %>
          <%= f.label "Recuerdame" %>
        </div>
      
      <% end -%>
      <div style="float:left;">
        <%= render "devise/shared/links" %>
      </div>
      <div class="actions" align="right">
        <button type="submit" onclick="validarUsuarioOpenbravo()" class="btn btn-primary btn-lg">entrar</button>
      </div>
    </div>
  </div>
  <% end %>
</body>
<script>
function validarUsuarioOpenbravo() {
  document.getElementById("new_usuario").submit();
  /*console.log("Validar existencia en Openbravo si no existe lo creara en devise.");
  var usr = document.getElementById("usuario_email").value;
  var pwd = document.getElementById("usuario_password").value;
  var url = window.location.href;
  console.log("URL: " + url);
  $.ajax({request.referer.include 
    type:"GET",
    dataType : 'json',
    url: "../api/v1/usuarios?usr=" + usr + "&pwd=" + pwd + "&url=" + url,
    success: function(datoz){
      // Validar que exista el usuario en device
       $.ajax({
        type:"GET",
        dataType : 'json',
        url: "../api/v1/usuarios?usr=" + usr + "&pwd=" + pwd + "&url=" + url,
        success: function(datoz){

        },  
        error:  function(){ 
          console.log("Error no gestionado");
        }
      });
      alert("El usuario de openbravo acaba de ser registrado, vuelve a intentarlo.");
    },  
    error:  function(){ 
      console.log("Error no gestionado");
      // El usuario no existe en ningún servidor
      console.log("No existe el usuario");
    }
  }); */
}
</script>